!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ubee=r()}}(function(){return function r(e,n,t){function o(u,a){if(!n[u]){if(!e[u]){var l="function"==typeof require&&require;if(!a&&l)return l(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[u]={exports:{}};e[u][0].call(s.exports,function(r){var n=e[u][1][r];return o(n?n:r)},s,s.exports,r,e,n,t)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<t.length;u++)o(t[u]);return o}({1:[function(r,e){e.exports={getProp:function(r,e){var n=0;"$this"===e[0]&&(n=1);for(var t=r,o=n,i=e.length;i>o;++o)if(!t||void 0===(t=t[e[o]]))return;return t},deleteProp:function(r,e){var n=r,t=0;for(len=e.length-1;t<len;++t)if(n&&!(n=n[e[t]]))return;n&&delete n[e[t]]},setProp:function(r,e,n){for(var t,o=r,i=0,u=e.length-1;u>i;++i)o=o&&!o[e[i]]?o[e[i]]={}:o[e[i]];return o&&(t=o[e[i]],o[e[i]]=n),t},shallowMerge:function(r,e){for(var n in r)e[n]=r[n]},shallowCopy:function(r){if(r&&r.forEach)return r.slice();if(r&&"object"==typeof r){if(r instanceof RegExp||r instanceof Date)return r;var e={};for(var n in r)e[n]=r[n];return e}return r},copy:function(r){if(!r)return r;var e=null;if("function"==typeof r.clone)return r.clone();if(r.forEach){e=[];for(var n=0,t=r.length;t>n;++n)e.push(this.copy(r[n]))}else if(r&&"object"==typeof r){if(r instanceof RegExp||r instanceof Date)return r;e={};for(var o in r){var i=r[o];e[o]="object"==typeof i?this.copy(i):i}}else e=r;return e},array:{includes:function(r,e){return r.some(function(r){return r===e})},remove:function(r,e){for(var n=0,t=r.length;t>n;++n)if(r[n]===e)return void r.splice(n,1)},randomize:function(r){return r?r.sort(function(){return.5-Math.random()}):null},insertAfter:function(r,e,n){var t=r.indexOf(e);if(-1===e)throw new Error("utils.array.insertAfter : ref not found.");t===r.length-1?r.push(n):r.splice(t+1,0,n)}}}},{}],2:[function(r,e){function n(r){return r&&r.forEach?"array":typeof r}var t=r("nomocas-utils/lib/object-utils"),o={};o.compile=function(){for(var r=t.copy(arguments[0]),e=arguments.length,n=1;e>n;++n)o.aup(arguments[n],r);return r},o.aup=function(r,e){if("undefined"==typeof r)return e;if(null===r)return null;if("undefined"==typeof e||null===e)return t.copy(r);if(e._ubee_compiler_)return e=e._up(r);if(r._ubee_compiler_)return r._clone&&(r=r._clone()),r._bottom(e);var i=n(r),u=n(e);if(i!==u)return e=t.copy(r);switch(i){case"array":return e.push.apply(e,r.map(t.copy)),e;case"object":if(r instanceof RegExp||r instanceof Date)return r;for(var a in r)e[a]="undefined"!=typeof e[a]?null!==r[a]?"object"==typeof r[a]||"function"==typeof r[a]?o.aup(r[a],e[a]):r[a]:null:t.copy(r[a]);return e;default:return r}},o.abottom=function(r,e){if(null===r||"undefined"==typeof r)return e;if(null===e)return e;if("undefined"==typeof e)return e=t.copy(r);if(e._ubee_compiler_)return e=e._bottom(r);if(r._ubee_compiler_)return e;var i=n(r),u=n(e);if(i!==u)return e;switch(i){case"array":return e.unshift.apply(e,r.map(t.copy)),e;case"object":for(var a in r)null!==r[a]&&("undefined"==typeof e[a]?e[a]=t.copy(r[a]):("object"==typeof r[a]||"function"==typeof r[a])&&(e[a]=o.abottom(r[a],e[a])),e[a]&&e[a]._ubee_remover_&&delete e[a]);var l=t.shallowCopy(e);for(a in e)delete e[a];for(a in r)e[a]=l[a],delete l[a];for(a in l)e[a]=l[a];return e;default:return e}},o.up=function(){for(var r=arguments[0],e=1,n=arguments.length;n>e;e++)r=o.aup(arguments[e],r);return r},o.bottom=function(){for(var r=arguments[arguments.length-1],e=arguments[0],n=arguments.length-2;n>0;n--)r=o.abottom(arguments[n],r);return o.abottom(e,r)},e.exports=o},{"nomocas-utils/lib/object-utils":1}],3:[function(r,e){var n=r("../index"),t={},o=t.Collider=function(r){this._collision=r,this._ubee_compiler_=!0,this._ubee_collider_=!0};o.prototype={_wrapper:function(r){var e=this._collision;return function(n){return r(e(n))}},_clone:function(){var r=new o;return r._collision=this._collision,r},_up:function(r){return r._ubee_collider_?(this._collision=this._wrapper(r._collision),this):r},_bottom:function(r){return r._ubee_collider_?(this._collision=r._wrapper(this._collision),this):this._collision(r)}},o.add=function(r,e){var n=function(){var r=Array.prototype.slice.apply(arguments),n=function(n){return r.unshift(n),e.apply({},r)};return this._ubee_collider_?(this._collision=this._wrapper(n),this):new o(n)};return t[r]=o.prototype[r]=n,o},o.add("bottom",function(){for(var r=arguments.length-1,e=arguments[0];r>0;--r)e=n.abottom(arguments[r],e);return e}),o.add("up",function(){for(var r=arguments.length,e=arguments[0],t=1;r>t;++t)e=n.aup(arguments[t],e);return e}),o.add("insertAt",function(r,e,n){if(!Array.isArray(r))throw new Error("colliders.insertAt couldn't be applied : target is not an array.");var t=[n,0].concat(e);return r.splice.apply(r,t),r}),o.add("removeAt",function(r,e,n){if(!Array.isArray(r))throw new Error("collider.removeAt couldn't be applied : target is not an array.");return n||0===n||(n=1),r.splice(e,n),r}),o.add("push",function(r,e){if(!Array.isArray(r))throw new Error("collider.push couldn't be applied : target is not an array.");return r.push(e),r}),o.add("unshift",function(r,e){if(!Array.isArray(r))throw new Error("collider.push couldn't be applied : target is not an array.");return r.unshift(e),r}),o.add("map",function(r,e){return Array.isArray(r)?r.map(e):e(r)}),o.add("transform",function(r,e){return e(r)}),n.collider=t,e.exports=t},{"../index":2}],4:[function(r,e){{var n=r("../index");r("./collider")}r("./restrictions"),e.exports=n},{"../index":2,"./collider":3,"./restrictions":5}],5:[function(r,e){var n=r("../index"),t=function(r){return function(){var e=new Error(r||"forbidden method");throw e.status=405,e}},o=function(){var r={};for(var e in arguments)r[arguments[e]]=t();return r},i=function(){return{inner:{},allowable:Array.prototype.slice.call(arguments),_ubee_compiler_:!0,_ubee_allow_only_:!0,_up:function(){for(var r=this.inner,e=0,t=arguments.length;t>e;++e){var o=arguments[e];o._ubee_allow_only_?(r=n.aup(o.inner,r),this.allowable=n.aup(o.allowable,this.allowable)):r=n.aup(o,r)}return this.inner=r,this},_bottom:function(){for(var r=this.inner,e=null,o=arguments.length-1;o>=0;--o){var i=arguments[o];i._ubee_allow_only_?(r=n.abottom(i.inner,r),this.allowable=n.aup(i.allowable,this.allowable)):r=n.abottom(i,r)}if(r._ubee_restrictable_)for(var u=utils.removeInside(r._ubee_restrictable_.slice(),this.allowable),a=0,l=u.length;l>a;++a)r[u[a]]=t();else{if(!e){e={};for(var f=0,s=this.allowable.length;s>f;++f)e[this.allowable[f]]=!0}for(var c in r)"function"!=typeof r[c]||e[c]||(r[c]=t())}return r}}};n.Disallow=o,n.AllowOnly=i,n.forbidden=t,e.exports=n},{"../index":2}]},{},[4])(4)});